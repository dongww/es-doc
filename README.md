# 接口文档
## 目录
* [文档说明](#文档说明)
* 模特相关
    * [获取所有发型选项](#获取所有发型选项)
    * [获取所有脸型选项](#获取所有脸型选项)
    * [获取所有发色选项](#获取所有发色选项)
    * [获取可设定的体型选项](#获取可设定的体型选项)
    * [用户保存或更改体型数据](#用户保存或更改体型数据)
    * [获取用户保存的模特数据](#获取用户保存的模特数据)
    * [根据体型数据获取模特模型](#根据体型数据获取模特模型)
* 试衣搭配相关
    * [用户保存试衣搭配](#用户保存试衣搭配)
    * [用户获取试衣搭配记录](#用户获取试衣搭配记录)
    * [删除搭配记录](#删除搭配记录)
* 商品相关
    * [获取特定商品数据](#获取特定商品数据)

----------------------------------------------------------------------------

## 文档说明
* 该文档仅供参考，并非最终明确的接口文档，需要进一步沟通确认
* 接口参数命名使用中文表示，英文命名双方统一术语后确定
* 接口中的“模型”属性，包含模特展示需要用到的模型文件或相关数据，
具体的格式由易尚根据3D模型的实际情况确定。
* token 为用户的身份标志，需要登陆后才能使用的接口都需要在 http header 里面带上 token

----------------------------------------------------------------------------

## 获取所有发型选项

### 请求
* 方法 GET

### 返回
说明：
* 默认是由系统设定的默认发型。
* “图片”用于用户选择的时候区分发型，

演示：
```json
[
  {
    "id": 1,
    "图片": "文件路径",
    "模型": {},
    "名称": "长发",
    "默认": true
  },
  {
      "id": 2,
      "图片": "文件路径",
      "模型": {},
      "名称": "长发"
   }
]
```
----------------------------------------------------------------------------

## 获取所有脸型选项
说明：用户如果没有扫描过脸部，可以从列表中选择一个跟自己相近的脸型进行演示。

### 请求
* 方法 GET
* 参数：
    * 性别id

### 返回
说明：默认是由系统设定的默认脸型

演示：
```json
[
  {
    "id": 1,
    "图片": "a.png",
    "模型": {},
    "名称": "圆脸",
    "默认": true
  },
  {
      "id": 2,
      "图片": "a.png",
      "模型": {},
      "名称": "圆脸"
    }
]
```
----------------------------------------------------------------------------

## 获取所有发色选项

### 请求
* 方法 GET
* 参数：
    * 性别id

### 返回
说明：默认是由系统设定的默认发色

演示：
```json
[
  {
    "id": 1,
    "颜色": {}
  },
  {
     "id": 2,
     "颜色": {}
  }
]
```
----------------------------------------------------------------------------

## 获取可设定的体型选项
说明：具体选项待定，文档仅为格式演示

### 请求
* 方法 GET
* 参数：
    * 性别id

### 返回
说明：

演示：
```json
[
  {
    "id": 1,
    "名称": "胸围",
    "类型": "整数",
    "最大值": 100,
    "最小值": 50,
    "默认值": 60
  },
  {
      "id": 2,
      "名称": "腰围",
      "类型": "整数",
      "最大值": 100,
      "最小值": 50,
      "默认值": 60
   }
]
```

----------------------------------------------------------------------------

## 用户保存或更改体型数据

### 请求
* 方法 PUT

### header
* token
*

### 内容
说明：体型参数里的 id 指体型选项的id，例如胸围 id 是 1，腰围 id 是 2
演示：
```json
{
    "性别id": 1,
    "体型参数": [
        {
          "id": 1,
          "数值": 67
        },
        {
          "id": 2,
          "数值": 60
        }
    ]
}
```
### 返回
说明：返回成功标记或原样返回数据

----------------------------------------------------------------------------
## 获取用户保存的模特数据

### 请求
* 方法 GET

#### header
* token （如果有的话）

### 返回
说明：如果带 token 返回用户保存的数据（若保存过），否则返回默认数据。

* header X-是否用户设定：true 或 false ，
若用户从未保存，或token无效，或无token，则 false，
若用户已保存过，则返回true，即使用户设定跟系统默认设定一致

演示：
```json
{
  "性别": {
    "id": 12,
    "名称": "男"
   },
   "发型id": 3,
   "脸型id": 5,
   "发色id": 5,
  "体型参数": [
      {
        "id": 1,
        "数值": 67
      },
      {
        "id": 2,
        "数值": 60
      }
  ],
  "模型": {}
}
```

----------------------------------------------------------------------------

## 根据体型数据获取模特模型
### 请求
说明：参数皆可选，若某一项无参数，则使用系统默认设定值
* 方法 GET
* 参数
    * 性别id
    * 发型id
    * 发色id
    * 脸型id
    * 体型参数，id和值为一对参数，用冒号隔开，不同参数用逗号隔开
* 演示： ````?性别id=1&体型参数=3:12,5:1&发型id=````
### 返回
```json
{
  "性别": {
    "id": 12,
    "名称": "男"
   },
   "发型id": 3,
   "脸型id": 5,
   "发色id": 5,
  "体型参数": [
      {
        "id": 1,
        "数值": 67
      },
      {
        "id": 2,
        "数值": 60
      }
  ],
  "模型": {}
}
```

----------------------------------------------------------------------------
## 用户保存试衣搭配
### 请求
* 方法 POST

### header
* token

### 内容
说明：“当前”指的是当前穿的搭配，需要保存在服务器，以便下次打开复原

演示：
```json
{
  "搭配":[
    {
      "商品id": 234,
      "skuid": 322
    },
    {
      "商品id": 777,
      "skuid": 322
    }
  ],
  "当前": 234
}
```
### 返回
说明：原样返回数据，带id

----------------------------------------------------------------------------
## 用户获取试衣搭配记录
### 请求
* 方法 GET

### header
* token

### 返回
说明：数组，每一项为一种搭配。若有商品已经下架，则省略该商品，
若某种搭配所有商品都已下架，则忽略该搭配。
“商品”包含搭配相关的所有商品图片信息，因为涉及到定制商品，所以本质上是定制选项的组合（SKU）关联的模型

演示：
```json
[
  {
    "搭配id": 111,
    "性别id": 123,
    "商品":[
        {
          "商品id": 2346,
          "性别id": 345,
          "商品名称": "asdf",
          "商品类型": "上装",
          "skuid": 234,
          "图片": "a.png",
          "模型": {},
          "顺序": 1
        },
        {
          "商品id": 2346,
          "性别id": 345,
          "商品名称": "asdf",
          "商品类型": "上装",
          "skuid": 234,
          "图片": "a.png",
          "模型": {},
          "顺序": 1
        }
    ],
    "默认": true
  },
  {
      "搭配id": 222,
      "性别id": 123,
      "商品":[
            {
              "商品id": 2346,
              "性别id": 345,
              "商品名称": "asdf",
              "商品类型": "上装",
              "skuid": 234,
              "图片": "a.png",
              "模型": {},
              "顺序": 1
            },
            {
              "商品id": 2346,
              "性别id": 345,
              "商品名称": "asdf",
              "商品类型": "上装",
              "skuid": 234,
              "图片": "a.png",
              "模型": {},
              "顺序": 1
            }
    ]
    }
]
```
----------------------------------------------------------------------------
## 删除搭配记录
说明：可批量删除多条
### 请求
* 方法：DELETE
* 参数：ids（多个“搭配id”）
* 演示： ?ids=123,234,345

----------------------------------------------------------------------------
## 获取特定商品数据
说明：商品数据跟体型相关。

### 请求
* 方法 GET
* 参数
    * 性别id
    * 发型id
    * 发色id
    * 脸型id
    * 体型参数，id和值为一对参数，用冒号隔开，不同参数用逗号隔开
    * 商品id
    * skuid
* 演示： ````?性别id=1&体型参数=3:12,5:1&发型id=4&skuid=asdfsdf````

### 返回
说明：顺序为服装叠加的层次，例如：衬衫为1，西服为2。同层次服装只能穿一件

演示：
```json
{
  "商品id": 2346,
  "性别id": 345,
  "商品名称": "asdf",
  "商品类型": "上装",
  "skuid": 234,
  "图片": "a.png",
  "模型": {},
  "顺序": 1
}
```
